import{j as w,r as u,v as A,a as f,u as S,B as F,R as D,b,c as k,d as $}from"./vendor.5d5267a7.js";const j=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))m(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}};j();const e=w.exports.jsx,t=w.exports.jsxs,y=w.exports.Fragment,O="http://ec2-35-74-5-118.ap-northeast-1.compute.amazonaws.com";function T(){return u.exports.useEffect(()=>{let r=A();var c=JSON.stringify({register_id:r}),i={method:"post",url:`${O}/register_id`,headers:{"Content-Type":"application/json"},data:c};f(i).then(m=>{localStorage.setItem("register_id",r)}).catch(m=>{console.log(m)})}),e("div",{className:"container",children:t("div",{className:"container-wrap",children:[e("div",{className:"top-header",children:e("h1",{children:"\u30DE\u305C\u3066"})}),t("div",{className:"top-banner",children:[e("img",{src:"/assets/image/top-banner-img01.png",alt:"",className:"top-banner01"}),e("img",{src:"/assets/image/top-banner-img02.png",alt:"",className:"top-banner02"}),e("img",{src:"/assets/image/top-banner-img03.png",alt:"",className:"top-banner03"}),e("img",{src:"/assets/image/top-banner-img04.png",alt:"",className:"top-banner04"}),e("div",{className:"top-banner-text",children:"\u203B\u30B5\u30FC\u30D3\u30B9\u5185\u5BB9\u4F1D\u308F\u308B\u30A4\u30E9\u30B9\u30C8\u5916\u6CE8"})]}),e("a",{href:"/select",className:"start-btn",children:"\u30B9\u30BF\u30FC\u30C8"}),e("div",{className:"top-banner-border"}),t("div",{className:"top-delusion",children:[e("div",{className:"top-delusion-title",children:"\u307F\u3093\u306A\u306E\u5984\u60F3"}),t("div",{className:"top-delusion-body",children:[e("img",{src:"/assets/image/top-delusion-img01.png",alt:"",className:"top-delusion-img"}),e("img",{src:"/assets/image/top-delusion-img02.png",alt:"",className:"top-delusion-img"}),e("img",{src:"/assets/image/top-delusion-img03.png",alt:"",className:"top-delusion-img"}),e("img",{src:"/assets/image/top-delusion-img04.png",alt:"",className:"top-delusion-img"})]})]})]})})}const B="http://ec2-35-74-5-118.ap-northeast-1.compute.amazonaws.com";function L(){const[r,c]=u.exports.useState(1),[i,m]=u.exports.useState([]),[a,l]=u.exports.useState(null),[g,h]=u.exports.useState([]),[o,N]=u.exports.useState([]);u.exports.useEffect(()=>{let s=localStorage.register_id||null;s||window.location.assign("/");let n=JSON.stringify({user_id:s,search_query:"",chosen_chara_ids:"",chosen_world_ids:""}),p={method:"post",url:`${B}/get_chara_list`,headers:{"Content-Type":"application/json"},data:n};f(p).then(v=>{h(v.data.chara_list)}).catch(v=>{console.log(v)});let E=JSON.stringify({user_id:s,search_query:"",chosen_chara_ids:"",chosen_world_ids:""}),x={method:"post",url:`${B}/get_world_list`,headers:{"Content-Type":"application/json"},data:E};f(x).then(v=>{N(v.data.world_list)}).catch(v=>{console.log(v)})},[]);const _=s=>{let n=i;if(n.includes(s)){for(let p=0;p<n.length;p++)n[p]===s&&(n.splice(p,1),p--);m([...n])}else n.length<3&&(n.push(s),m([...n]))},d=()=>{let s=localStorage.register_id||null,n=JSON.stringify({user_id:s,chosen_chara_ids:i.toString(),chosen_world_ids:[a].toString()}),p={method:"post",url:`${B}/generate_outline`,headers:{"Content-Type":"application/json"},data:n};f(p).then(E=>{localStorage.setItem("outline_id",E.data.outline_id),window.location.assign("/synopsis")}).catch(E=>{console.log(E)})};return e("div",{className:"container",id:"character_select",children:t("div",{className:"container-wrap",children:[t("div",{className:"preview",children:[t("div",{className:"preview-part",onClick:()=>c(1),children:[t("div",{className:"preview-img-part",children:[i.map(s=>e("img",{src:g.filter(n=>n.chara_id==s)[0].img_url,alt:""},s)),i.length==0&&e("img",{src:"/assets/image/default-avatar.png"})]}),e("div",{className:r===1?"preview-title-part active":"preview-title-part",children:"\u30AD\u30E3\u30E9"})]}),t("div",{className:"preview-part",onClick:()=>{c(2)},children:[e("div",{className:"preview-img-part",children:e("img",{src:a!=null?o.filter(s=>s.world_id==a)[0].img_url:"/assets/image/point-bg.png",alt:""})}),e("div",{className:r===2?"preview-title-part active":"preview-title-part",children:"\u4E16\u754C"})]})]}),t("div",{className:"point-select",children:[t("div",{className:"point-search",children:[e("input",{type:"text"}),e("button",{type:"button",className:"search-btn",children:e("img",{src:"/assets/image/point-search.png",alt:""})})]}),t("div",{className:"point-body",children:[r===1&&e("div",{className:"point-body-wrap",children:g.map((s,n)=>t("div",{onClick:()=>_(s.chara_id),className:`${i.includes(s.chara_id)?"active":""} character-item`,children:[e("img",{src:s.img_url,alt:""}),e("span",{})]},n))}),r==2&&e("div",{className:"point-body-wrap",children:o.map((s,n)=>t("div",{className:`${a==s.world_id?"active":""} location-item`,onClick:p=>{l(s.world_id)},children:[e("img",{src:s.img_url,alt:""}),e("span",{})]},n))}),e("button",{onClick:d,className:"character-add-btn",children:"\u30DE\u305C\u308B"})]})]})]})})}const C="http://ec2-35-74-5-118.ap-northeast-1.compute.amazonaws.com";function J(){const[r,c]=u.exports.useState(!1),[i,m]=u.exports.useState(!0),[a,l]=u.exports.useState(`\u30D3\u30EB\u306E\u5C4B\u4E0A\u306B\u3042\u3064\u3081\u3089\u308C\u305F\u30B4\u30F3\u9054\u3002

\u5229\u6839\u5DDD\u304B\u3089\u9244\u9AA8\u306E\u4E0A\u3092\u6E21\u3063\u3066\u3001\u5411\u3053\u3046\u306E\u30D3\u30EB\u3078\u884C\u3051\u305F\u3082\u306E\u306B\u8CDE\u91D1\u304C\u3082\u3089\u3048\u308B\u3068\u8AAC\u660E\u3092\u53D7\u3051\u308B\u3002

\u30B4\u30F3\u9054\u306F\u3044\u304B\u306B\u3057\u3066\u3053\u306E\u5371\u6A5F\u3092\u4E57\u308A\u8D8A\u3048\u308B\u306E\u304B\uFF1F`);return u.exports.useEffect(()=>{let h=localStorage.register_id||null,o=localStorage.outline_id||null,N=JSON.stringify({user_id:h,outline_id:o}),_={method:"post",url:`${C}/get_outline`,headers:{"Content-Type":"application/json"},data:N};f(_).then(d=>{console.log(d.data),d.data.generated&&d.data.outline&&!d.data.error?(m(!1),l(d.data.outline)):window.location.assign("/select")}).catch(d=>{console.log(d)})},[]),e("div",{className:"container",id:"loading_synposis",children:t("div",{className:"container-wrap",children:[e("div",{className:"ls-top editing",children:e("div",{className:"ls-top-wrap",children:t("div",{className:"ls-top-body",children:[e("div",{className:"ls-top-item",children:e("img",{src:"/assets/image/character01.png",alt:""})}),e("div",{className:"ls-top-item",children:e("img",{src:"/assets/image/character02.png",alt:""})}),e("div",{className:"ls-top-item",children:e("img",{src:"/assets/image/character03.png",alt:""})})]})})}),t("div",{className:"ls-main",children:[e("div",{className:"ls-main-title",children:"\u3042\u3089\u3059\u3058"}),t("div",{className:"ls-main-loading-text",children:[i&&t("div",{className:"ls-main-loading-part",children:[e("img",{src:"/assets/image/white-loading.gif",alt:""}),e("span",{children:"\u4E0B\u66F8\u304D\u6E96\u5099\u4E2D"})]}),!i&&e("textarea",{autoFocus:!0,className:"ls-main-loading-wrap",value:a,disabled:!r,onChange:h=>{l(h.target.value)},onBlur:()=>{c(!1)}})]}),!r&&e("div",{className:"ls-main-edit-btn",children:t("a",{onClick:()=>{c(!0)},children:[e("span",{children:"\u7DE8\u96C6"}),e("img",{src:"/assets/image/edit-icon.png",alt:""})]})}),!r&&e("button",{onClick:()=>{let h=localStorage.register_id||null,o=localStorage.outline_id||null,N=JSON.stringify({user_id:h,outline_id:o,outline:a}),_={method:"post",url:`${C}/generate_story`,headers:{"Content-Type":"application/json"},data:N};f(_).then(d=>{window.location.assign(`/talk/${d.data.story_id}`)}).catch(d=>{console.log(d)})},className:i?"ls-main-making-btn":"ls-main-making-btn active",disabled:i,children:"\u3053\u306E\u4E16\u754C\u7DDA\u306B\u5165\u308B"})]})]})})}const R="http://ec2-35-74-5-118.ap-northeast-1.compute.amazonaws.com";function I(){const[r,c]=u.exports.useState(!0),[i,m]=u.exports.useState(null);let{story_id:a}=S();return u.exports.useEffect(()=>{let l=localStorage.register_id||null,g=JSON.stringify({user_id:l,story_id:a}),h={method:"post",url:`${R}/get_story`,headers:{"Content-Type":"application/json"},data:g};f(h).then(o=>{c(!1),console.log(o.data),o.data.generated&&!o.data.error?(c(!1),m(o.data)):window.location.assign("/select")}).catch(o=>{console.log(o)})},[]),t(y,{children:[r&&e("div",{className:"container",id:"loading_adventure",children:e("div",{className:"container-wrap",children:t("div",{className:"la-wrap",children:[e("img",{src:"./assets/image/black-loading.gif",alt:""}),e("span",{children:"\u6E96\u5099\u4E2D"})]})})}),!r&&e("div",{className:"container",id:"adventure_state",children:t("div",{className:"container-wrap",children:[e("div",{className:"as-thumb",style:{backgroundImage:`url(${i==null?void 0:i.background_url})`},children:e("img",{src:"./assets/image/character03.png",alt:"",className:"as-thumb-character lb"})}),t("div",{className:"as-text",children:[e("div",{className:"as-text-wrap",children:"\u4ECA\u5E74\u306E\u65B0\u4EBA\u306F\u3064\u3076\u3057\u304C\u3044\u304C\u3042\u308B\u305C"}),e("div",{className:"as-text-wrap",children:"\u4ECA\u5E74\u306E\u65B0\u4EBA\u306F\u3064\u3076\u3057\u304C\u3044\u304C\u3042\u308B\u305C"}),e("div",{className:"as-text-wrap",children:"\u4ECA\u5E74\u306E\u65B0\u4EBA\u306F\u3064\u3076\u3057\u304C\u3044\u304C\u3042\u308B\u305C"})]}),t("div",{className:"text-select-btn-group active",children:[e("a",{href:"",className:"next-btn",children:"\u30BF\u30C3\u30D7\u3057\u3066\u6B21\u3078\xA0\xA0\u25B6"}),e("a",{href:"",className:"next-btn active",children:"\u9078\u629E\u3057\u3066\u4E0B\u3055\u3044\xA0\xA0\u25B6"})]}),t("div",{className:"text-select-btn-group",children:[e("a",{href:"",className:"final-btn",children:"\u3082\u3046\u4E00\u5EA6\u898B\u308B"}),e("a",{href:"",className:"final-btn",children:"\u3053\u306E\u7269\u8A9E\u3092\u30B7\u30A7\u30A2\u3059\u308B"})]})]})})]})}function z(){return e(F,{children:t(D,{children:[e(b,{path:"/",element:e(T,{})}),e(b,{path:"/select",element:e(L,{})}),e(b,{path:"/synopsis",element:e(J,{})}),e(b,{path:"/talk/:id",element:e(I,{})})]})})}function q(){return e(y,{children:e(z,{})})}k.render(e($.StrictMode,{children:e(q,{})}),document.getElementById("root"));
